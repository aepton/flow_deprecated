Eventually I'll write up some docs for this, once I finish rewriting it.
